(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(1),c=t.n(a),o=t(15),s=t.n(o),u=t(6),i=t(3),l=t(4),d=t.n(l),b="/api/persons",j={getAll:function(){return d.a.get(b)},newRecord:function(e){return d.a.post(b,e)},deleteRecord:function(e){return d.a.delete("".concat(b,"/").concat(e))},replaceNumber:function(e){return d.a.put("".concat(b,"/").concat(e.id),e)},getOne:function(e){return d.a.get("".concat(b,"/").concat(e))}},m=function(e){var n=e.search,t=e.handleChange;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{children:"Show filter"}),Object(r.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.submitHandle,t=e.name,a=e.handleName,c=e.number,o=e.handleNumber;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:a})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:c,onChange:o})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.persons,t=e.search,a=e.setPersons,c=new RegExp(t,"i");return Object(r.jsx)("ul",{children:n.filter((function(e){return c.test(e.name)})).map((function(e){return Object(r.jsxs)("li",{children:[e.name," ",e.number," ",Object(r.jsx)("button",{onClick:function(){return t=e,void(window.confirm("Delete ".concat(t.name))&&j.deleteRecord(t.id).then((function(){a(n.filter((function(e){return e.id!==t.id})))})));var t},children:"delete"})]},e.name)}))})},O=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"notification",children:n})},p=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"error",children:n})},x=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),s=Object(i.a)(o,2),l=s[0],d=s[1],b=Object(a.useState)(""),x=Object(i.a)(b,2),g=x[0],v=x[1],w=Object(a.useState)(""),N=Object(i.a)(w,2),S=N[0],k=N[1],C=Object(a.useState)(null),R=Object(i.a)(C,2),y=R[0],A=R[1],T=Object(a.useState)(null),E=Object(i.a)(T,2),P=E[0],D=E[1];Object(a.useEffect)((function(){j.getAll().then((function(e){c(e.data)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(O,{message:y}),Object(r.jsx)(p,{message:P}),Object(r.jsx)(m,{search:S,handleChange:function(e){k(e.target.value)}}),Object(r.jsx)("h3",{children:"Add new record"}),Object(r.jsx)(h,{submitHandle:function(e){if(e.preventDefault(),t.some((function(e){return e.name===l}))){var n=t.find((function(e){return e.name===l})),r=Object(u.a)(Object(u.a)({},n),{},{number:g});window.confirm("".concat(l," is already added to the phonebook, replace the old number with a new one?"))&&j.replaceNumber(r).then((function(e){c(t.map((function(n){return n.id!==r.id?n:e.data}))),A("Changed ".concat(n.name,"'s number")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.error(e),e.response.data.error.name?D(e.response.data.error.name.message||null):e.response.data.error.number?D(e.response.data.error.number.message):D("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){D(null)}),5e3)}))}else{var a={name:l,number:g};j.newRecord(a).then((function(e){c(t.concat(e.data)),A("Added ".concat(a.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.log(e.response.data),e.response.data.error.name?D(e.response.data.error.name.message||null):e.response.data.error.number&&D(e.response.data.error.number.message),setTimeout((function(){D(null)}),5e3)}))}d(""),v("")},name:l,handleName:function(e){d(e.target.value)},number:g,handleNumber:function(e){v(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(f,{persons:t,search:S,setPersons:c})]})};t(38);s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d2258fae.chunk.js.map