{"version":3,"sources":["services/numbers.js","components/Filter.js","components/Form.js","components/Book.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["baseUrl","numberService","getAll","axios","get","newRecord","record","post","deleteRecord","id","delete","replaceNumber","person","put","getOne","Filter","search","handleChange","value","onChange","Form","submitHandle","name","handleName","number","handleNumber","onSubmit","type","Book","persons","setPersons","re","RegExp","filter","per","test","map","x","onClick","window","confirm","then","obj","Notification","message","className","Error","App","useState","newName","setNewName","newNumber","setNewNumber","setSearch","notification","setNotification","error","setError","useEffect","res","data","e","target","preventDefault","some","personObj","find","changedPerson","setTimeout","catch","err","console","response","concat","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d2258fae.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst baseUrl = `/api/persons`\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst newRecord = (record) => {\r\n    return axios.post(baseUrl, record)\r\n}\r\n\r\nconst deleteRecord = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst getOne = (id) => {\r\n    return axios.get(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst replaceNumber = (person) => {\r\n    return axios.put(`${baseUrl}/${person.id}`, person)\r\n}\r\n\r\n\r\nconst numberService = {getAll, newRecord, deleteRecord, replaceNumber, getOne};\r\nexport default numberService;","import React from \"react\";\r\n\r\nconst Filter = ({ search, handleChange }) => {\r\n    return (\r\n        <>\r\n            <span>Show filter</span><input value={search} onChange={handleChange} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Filter;","import React from \"react\";\r\n\r\nconst Form = ({ submitHandle, name, handleName, number, handleNumber }) => {\r\n    return (\r\n        <form onSubmit={submitHandle}>\r\n            <div>\r\n                name: <input value={name} onChange={handleName} />\r\n            </div>\r\n            <div>\r\n                number: <input value={number} onChange={handleNumber} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Form;","import numberService from \"../services/numbers\";\r\nimport React from \"react\";\r\n\r\nconst Book = ({ persons, search, setPersons }) => {\r\n    const re = new RegExp(search, 'i');\r\n\r\n    const handler = (person) => {\r\n        if (window.confirm(`Delete ${person.name}`)) {\r\n            numberService\r\n                .deleteRecord(person.id)\r\n                .then(() => {\r\n                    setPersons(persons.filter(obj => obj.id !== person.id));\r\n                })\r\n        }\r\n    }\r\n    return (\r\n        <ul>\r\n            {persons.filter(per => re.test(per.name)).map(x => <li key={x.name}>\r\n                {x.name} {x.number} <button onClick={() => handler(x)}>delete</button>\r\n            </li>)}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default Book;","import React from 'react'\r\n\r\nconst Notification = ({message}) => {\r\n    if (message === null) {\r\n        return null;\r\n    }\r\n    return (\r\n        <div className='notification'>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification;","import React from 'react'\r\n\r\nconst Error = ({message}) => {\r\n    if (message === null) {\r\n        return null;\r\n    }\r\n    return (\r\n        <div className='error'>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Error;","import React, { useState, useEffect } from 'react';\r\nimport numberService from './services/numbers';\r\n\r\nimport Filter from \"./components/Filter\";\r\nimport Form from \"./components/Form\";\r\nimport Book from \"./components/Book\";\r\nimport Notification from \"./components/Notification\";\r\nimport Error from \"./components/Error\";\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons ] = useState([]);\r\n    const [ newName, setNewName ] = useState('');\r\n    const [ newNumber, setNewNumber ] = useState('');\r\n    const [ search, setSearch ] = useState('');\r\n    const [ notification, setNotification ] = useState(null);\r\n    const [ error, setError ] = useState(null);\r\n\r\n    const hook = () => {\r\n        numberService\r\n            .getAll()\r\n            .then(res => {\r\n                setPersons(res.data);\r\n            });\r\n    }\r\n\r\n    useEffect(hook, []);\r\n\r\n    const handleNameChange = (e) => {\r\n        setNewName(e.target.value);\r\n    }\r\n\r\n    const handleNumberChange = (e) => {\r\n        setNewNumber(e.target.value);\r\n    }\r\n\r\n    const handleSearchChange = (e) => {\r\n        setSearch(e.target.value);\r\n    }\r\n\r\n    const addNewName = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (persons.some(obj => obj.name === newName)) {\r\n            const personObj = persons.find(obj => obj.name === newName);\r\n            const changedPerson = { ...personObj, number: newNumber };\r\n            if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)) {\r\n                numberService\r\n                    .replaceNumber(changedPerson)\r\n                    .then(res => {\r\n                        setPersons(persons.map(per => per.id !== changedPerson.id ? per : res.data));\r\n                        setNotification(`Changed ${personObj.name}'s number`);\r\n                        setTimeout(() => {\r\n                            setNotification(null);\r\n                        }, 5000)\r\n                    })\r\n                    .catch(err => {\r\n                        console.error(err);\r\n                        if (err.response.data.error.name) {\r\n                            setError(err.response.data.error.name.message || null);\r\n                        } else if (err.response.data.error.number) {\r\n                            setError(err.response.data.error.number.message)\r\n                        } else {\r\n                            setError(`Information of ${personObj.name} has already been removed from server`);\r\n                        }\r\n                        setTimeout(() => {\r\n                            setError(null);\r\n                        }, 5000);\r\n                    })\r\n            }\r\n        } else {\r\n            const personObj = {\r\n                name: newName,\r\n                number: newNumber\r\n            }\r\n            numberService\r\n                .newRecord(personObj)\r\n                .then(res => {\r\n                    setPersons(persons.concat(res.data));\r\n                    setNotification(`Added ${personObj.name}`);\r\n                    setTimeout(() => {\r\n                        setNotification(null);\r\n                    }, 5000);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err.response.data);\r\n                    if (err.response.data.error.name) {\r\n                        setError(err.response.data.error.name.message || null);\r\n                    } else if (err.response.data.error.number) {\r\n                        setError(err.response.data.error.number.message)\r\n                    }\r\n                    setTimeout(() => {\r\n                        setError(null);\r\n                    }, 5000);\r\n                })\r\n        }\r\n        setNewName('');\r\n        setNewNumber('');\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={notification} />\r\n            <Error message={error} />\r\n            <Filter search={search} handleChange={handleSearchChange} />\r\n\r\n            <h3>Add new record</h3>\r\n            <Form\r\n                submitHandle={addNewName}\r\n                name={newName}\r\n                handleName={handleNameChange}\r\n                number={newNumber}\r\n                handleNumber={handleNumberChange}\r\n            />\r\n\r\n            <h2>Numbers</h2>\r\n            <Book persons={persons} search={search} setPersons={setPersons} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}